(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(36)},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(3),c=a(5),o=a(4),l=a(6),i=a(0),s=a.n(i),u=a(20),m=a.n(u),p=a(40),h=a(22),f=a(38),d=a(7),g=a.n(d),v=a(11),E="http://127.0.0.1:5000",y="afro-recipe-token",b="afr-category_item_storage",O="afr-recipe_item_storage",w="afr-user_item_storage",j={createUser:function(){var e=Object(v.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/oauth/signup"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:t.email,password:t.password})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),localSignIn:function(){var e=Object(v.a)(g.a.mark(function e(t,a){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/login_check"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:a})});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),!localStorage.getItem("")){e.next=13;break}throw new Error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}(),googleLogin:function(){var e=Object(v.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/oauth/google"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({access_token:t})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),facebookLogin:function(){var e=Object(v.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/oauth/facebook"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({access_token:t})});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),getCurrentUser:function(){var e=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/users/me"),{method:"GET",headers:{"content-type":"application/json",Authorization:JSON.parse(localStorage.getItem(y)).token}});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),getRecipes:function(){var e=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/recipes"));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),getCategories:function(){var e=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/categories"));case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),getRecipeBySlug:function(){var e=Object(v.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/recipes?slug=").concat(t,".json"));case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),addRecipe:function(){var e=Object(v.a)(g.a.mark(function e(t){var a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/recipes"),{method:"POST",headers:{"content-type":"application/json",Authorization:JSON.parse(localStorage.getItem(y)).token},body:JSON.stringify(t)});case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),getRecipeOfTheDay:function(e){return Math.floor(Math.random()*e.length)},postImage:function(){var e=Object(v.a)(g.a.mark(function e(t){var a,n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={resource_type:t.resource_type,format:t.format,width:t.width,height:t.height,original_filename:t.original_filename,url:t.url,secure_url:t.secure_url},e.next=4,fetch("".concat(E,"/images"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer "+JSON.parse(localStorage.getItem(y)).token},body:JSON.stringify(a)});case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),new Error(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),postRecipeInCategory:function(){var e=Object(v.a)(g.a.mark(function e(t,a){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(E,"/categories/").concat(t,"/recipes"),{method:"POST",headers:{"content-type":"application/json",authorization:JSON.parse(localStorage.getItem(y)).token},body:JSON.stringify(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:throw e.prev=9,e.t0=e.catch(0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(t,a){return e.apply(this,arguments)}}()},S=s.a.createContext(),k=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={user:null,recipes:[],recipe:null,recipeOfDay:null,categories:[],category:null,setRecipe:function(e){a.setState({recipe:e}),localStorage.setItem(O,JSON.stringify(e))},setRecipeOfTheDay:function(e){var t=e[Math.floor(Math.random()*e.length)];a.setState({recipeDay:t})},setCategory:function(e){a.setState({category:e}),localStorage.setItem(b,JSON.stringify(e))},setUser:function(e){a.setState({user:e}),localStorage.setItem(w,JSON.stringify(e))}},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.getRecipes().then(function(t){e.setState({recipes:t.Items}),e.setState({recipeDay:Math.floor(Math.random()*t.Items)}),localStorage.setItem("afr-last_recipes_storage",JSON.stringify(t))}).catch(function(e){return console.log("il y a une erreur MyProvider cdm =>",e)}),j.getCategories().then(function(t){e.setState({categories:t.Items}),localStorage.setItem("afr-last_categories_storage",JSON.stringify(t))}).catch(function(e){return console.log("il y a une erreur MyProvider cdm =>",e)})}},{key:"componentDidUpdate",value:function(e,t,a){console.log("prevProps",e),console.log("prevState",t),console.log("snapshot",a)}},{key:"render",value:function(){return s.a.createElement(S.Provider,{value:{state:this.state}},this.props.children)}}]),t}(i.Component),_=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("form",null,s.a.createElement("label",null,s.a.createElement("span",{className:"material-icons"},"search"),s.a.createElement("input",{type:"search",name:"search"})))}}]),t}(i.Component),N=a(37),C=function(e){return s.a.createElement("nav",{className:"bottom-nav"},s.a.createElement("div",{className:"item"},s.a.createElement(N.a,{to:"/"},s.a.createElement("i",{className:"material-icons"},"home"),s.a.createElement("span",null,"home"))),s.a.createElement("div",{className:"item"},s.a.createElement(N.a,{to:"/cookbook"},s.a.createElement("i",{className:"material-icons"},"search"),s.a.createElement("span",null,"cookbook"))),s.a.createElement("div",{className:"item"},s.a.createElement(N.a,{to:"/login"},s.a.createElement("i",{className:"material-icons"},"home"),s.a.createElement("span",null,"login"))),s.a.createElement("div",{className:"item"},s.a.createElement(N.a,{to:"/signup"},s.a.createElement("i",{className:"material-icons"},"home"),s.a.createElement("span",null,"signup"))),s.a.createElement("div",{className:"item"},s.a.createElement(N.a,{to:"/profile"},s.a.createElement("i",{className:"material-icons"},"account_circle"),s.a.createElement("span",null,"profile"))))},x=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).like=function(e){console.log("this in like function :",e)},a.goBack=function(){window.history.back()},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("header",{className:"topbar-back"},s.a.createElement(S.Consumer,null,function(t){return s.a.createElement(i.Fragment,null,s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){return e.goBack()},className:"material-icons"},"chevron_left")),s.a.createElement("div",null,s.a.createElement("button",{onClick:function(){e.like(t)},className:"material-icons"},"favorite_border"),s.a.createElement("button",{className:"material-icons"},"share")))}))}}]),t}(i.Component),I=(i.Component,function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={recipeDay:null,isLoaded:!1},a.onChangeRoute=function(e){a.props.history.push("/recettes/".concat(e.slug))},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.getRecipes().then(function(t){var a=t.Items[Math.floor(Math.random()*t.Items.length)];e.setState({recipeDay:a,isLoaded:!0})})}},{key:"render",value:function(){var e=this;return s.a.createElement(i.Fragment,null,s.a.createElement(_,null),s.a.createElement(S.Consumer,null,function(t){return null!==e.state.recipeDay&&e.state.isLoaded?s.a.createElement("section",{onClick:function(){e.onChangeRoute(e.state.recipeDay),t.state.setRecipe(e.state.recipeDay)}},e.state.recipeDay?s.a.createElement(i.Fragment,null,s.a.createElement("h1",null,e.state.recipeDay.title),s.a.createElement("p",null,e.state.recipeDay.description),s.a.createElement("span",null,e.state.recipeDay.author.profile.name.display_name)):s.a.createElement("h1",null,"pas de recette")):s.a.createElement("h1",null,"loading...")}),s.a.createElement("h2",null,"Nouveautes"),s.a.createElement("div",{className:"holster"},s.a.createElement("section",{className:"container x mandatory-scroll-snapping",dir:"ltr"},s.a.createElement(S.Consumer,null,function(t){return t.state.recipes.map(function(a,n){return s.a.createElement("div",{style:{},key:a.id,onClick:function(){e.onChangeRoute(a),t.state.setRecipe(a)}},s.a.createElement("img",{height:"100%",src:a.image.secure_url,alt:a.image.original_filename}),s.a.createElement("div",{className:"infos"},s.a.createElement("h3",null,a.title.slice(0,20),"...")))})}))),s.a.createElement("h2",null,"Top recipes"),s.a.createElement("div",{className:"holster"},s.a.createElement("section",{className:"container x mandatory-scroll-snapping top"},s.a.createElement(S.Consumer,null,function(t){return t.state.categories.map(function(a){return s.a.createElement("div",{key:a.id,onClick:function(){e.props.history.push("/category/"+a.slug),t.state.setCategory(a)}},s.a.createElement("h3",null,a.name),s.a.createElement("p",null,a.description))})}))),s.a.createElement(C,null))}}]),t}(i.Component)),D=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={isLoaded:!1,user:{}},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.getCurrentUser().then(function(t){console.log("user",t[0]),localStorage.setItem(w,JSON.stringify(t)),e.setState({user:t[0],isLoaded:!0})}).catch(function(e){localStorage.removeItem(y),window.location.replace("/login")})}},{key:"render",value:function(){return this.state.isLoaded?s.a.createElement(i.Fragment,null,s.a.createElement("header",{style:{height:"56px",width:"100%",display:"flex",alignItems:"center",border:"1px solid black"}},s.a.createElement("button",{className:"material-icons"},"menu")),s.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},s.a.createElement("div",{style:{border:"1px solid black",width:"150px",height:"150px",borderRadius:"50%",position:"relative",overflow:"hidden"}},s.a.createElement("img",{width:"100%",src:this.state.user.profile.image_url,alt:"profile image"})),s.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},s.a.createElement("div",null,this.state.user.recipes.length," ",this.state.user.recipes>0?"recettes":"recette"),s.a.createElement("div",null,"56 likes"))),s.a.createElement("h1",null,this.state.user.profile.name.display_name),s.a.createElement("section",null,s.a.createElement("h3",null,"mes recettes"),s.a.createElement("div",null,s.a.createElement("ul",null,this.state.user.recipes.map(function(e,t){return s.a.createElement("li",{key:t},e.title)})))),s.a.createElement("section",null,s.a.createElement("h3",null,"mes favories"),s.a.createElement("div",null,s.a.createElement("ul",null))),s.a.createElement(C,null)):s.a.createElement("div",null,"Loading...")}}]),t}(i.Component),R=a(12),J=a(39),T=a(18),L=a(17),F=(i.Component,a(21)),M=a.n(F),P=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).googleSignin=function(e){j.googleLogin(e.accessToken).then(function(e){localStorage.setItem(y,JSON.stringify(e)),a.setState({redirectToReferrer:!0})}).catch(function(e){return localStorage.removeItem(y)})},a.facebookSignin=function(e){j.facebookLogin(e.accessToken).then(function(e){localStorage.setItem(y,JSON.stringify(e)),a.setState({redirectToReferrer:!0})}).catch(function(e){return localStorage.removeItem(y)})},a.login=function(){},a.handleSubmit=function(e){e.preventDefault(),j.localSignIn(a.state.username,a.state.password).then(function(e){localStorage.setItem(y,JSON.stringify(e)),a.setState({redirectToReferrer:!0})}).catch(function(e){return localStorage.removeItem(y)})},a.state={redirectToReferrer:!1,username:"",password:""},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=(this.props.location.state||{from:{pathname:"/"}}).from;return this.state.redirectToReferrer?s.a.createElement(J.a,{to:t}):s.a.createElement(i.Fragment,null,s.a.createElement(S.Consumer,null,function(t){return s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login__container"},s.a.createElement("div",{className:"login__container__title"},s.a.createElement("h1",null,"Sign in")),s.a.createElement("form",{className:"login__container__form",onSubmit:e.handleSubmit},s.a.createElement("label",null,s.a.createElement("input",{type:"text",name:"username",placeholder:"username",autoComplete:"username",onChange:function(t){return e.setState({username:t.target.value})},value:e.state.username})),s.a.createElement("label",null,s.a.createElement("input",{type:"password",name:"password",placeholder:"password",autoComplete:"current-password",onChange:function(t){return e.setState({password:t.target.value})},value:e.state.password})),s.a.createElement("div",{className:"forgot-password"},s.a.createElement("span",null,"Forgot password")),s.a.createElement("button",{type:"submit"},"Done!")),s.a.createElement("div",{className:"login__container__register"},s.a.createElement("p",null,"Don't have an account?"),s.a.createElement(T.a,{to:"/register"},"Create a profile"))))}),s.a.createElement(L.GoogleLogin,{clientId:"940248034518-k2o89ghddupu9hgsfvc3ch1h497gntc5.apps.googleusercontent.com",render:function(e){return s.a.createElement("button",{onClick:e.onClick},"Mon bouton de login")},buttonText:"Login",onSuccess:this.googleSignin,onFailure:this.googleSignin}),s.a.createElement(M.a,{appId:"1075030476017548",autoLoad:!1,fields:"name,email,picture",onClick:this.facebookSignin,callback:this.facebookSignin,textButton:"mon bouton facebook",cssClass:"my-facebook-button-class"}))}}]),t}(i.Component),A=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={email:"",username:"",password:""},a.handleSubmit=function(e){e.preventDefault(),j.createUser(a.state).then(function(e){return console.log(e)})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",{htmlFor:"username"},s.a.createElement("input",{type:"text",name:"username",id:"username",placeholder:"username",value:this.state.username,onChange:function(t){return e.setState(Object(R.a)({},t.target.name,t.target.value))}})),s.a.createElement("label",{htmlFor:"email"},s.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:"email",value:this.state.email,onChange:function(t){return e.setState(Object(R.a)({},t.target.name,t.target.value))}})),s.a.createElement("label",{htmlFor:"password"},s.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.setState(Object(R.a)({},t.target.name,t.target.value))}})),s.a.createElement("button",{type:"submit"},"Done")))}}]),t}(i.Component),U=a(23),z=function(e){var t=e.component,a=Object(U.a)(e,["component"]);return s.a.createElement(h.a,Object.assign({},a,{render:function(e){return localStorage.getItem(y)?s.a.createElement(t,e):s.a.createElement(J.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={nav:"ingredients"},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this;switch(this.state.nav){case"ingredients":e=s.a.createElement("h1",null,"les ingredients");break;case"steps":e=s.a.createElement("h1",null,"les instructions");break;case"comments":e=s.a.createElement(H,null);break;default:e=s.a.createElement("h1",null,"les ingredients")}return s.a.createElement(i.Fragment,null,s.a.createElement(x,null),s.a.createElement(S.Consumer,null,function(a){return s.a.createElement("section",{style:{minHeight:"100vh",backgroundAttachment:"fixed",backgroundPosition:"center",backgroundSize:"cover"}},s.a.createElement("div",{className:"recipe__details"},s.a.createElement("h2",null,JSON.parse(localStorage.getItem(O)).title||a.state.recipe.title),s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("i",{className:"material-icons"},"home"),s.a.createElement("span",null,"easy")),s.a.createElement("div",null,s.a.createElement("i",{className:"material-icons"},"schedule"),s.a.createElement("span",null,"45 min")))),s.a.createElement("div",null,s.a.createElement("nav",null,s.a.createElement("ul",{style:{listStyle:"none",padding:0,margin:0,display:"flex",justifyContent:"space-around"}},s.a.createElement("li",{onClick:function(){return t.setState({nav:"ingredients"})}},"Ingredients"),s.a.createElement("li",{onClick:function(){return t.setState({nav:"steps"})}},"Steps"),s.a.createElement("li",{onClick:function(){return t.setState({nav:"comments"})}},"commentaires"))),s.a.createElement("div",null,e)))}))}}]),t}(i.Component),H=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("section",null,s.a.createElement("ul",null,s.a.createElement(S.Consumer,null,function(e){return e.state.recipe.comments.map(function(e){return s.a.createElement("li",{key:e.id},s.a.createElement("p",null,e.content),s.a.createElement("span",null,e.user.username))})})))}}]),t}(i.Component),W=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(x,null),s.a.createElement(S.Consumer,null,function(e){return s.a.createElement("section",null,s.a.createElement("ul",null,e.state.category.recipes.map(function(e,t){return s.a.createElement("li",{key:t},e.title)})))}))}}]),t}(i.Component),q=function(e){return new Promise(function(t,a){var n="https://api.cloudinary.com/v1_1/".concat("dzzhkrju0","/upload"),r=new XMLHttpRequest,c=new FormData;r.open("POST",n,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onreadystatechange=function(e){if(4===r.readyState&&200===r.status){var a=JSON.parse(r.responseText);return t(a)}},c.append("upload_preset","zbwyy7po"),c.append("folder","mes_images"),c.append("tags","browser_upload"),c.append("file",e),r.send(c)})};function X(e,t){e=(e=e.trim()).toLowerCase();for(var a="\xe5\xe0\xe1\xe3\xe4\xe2\xe8\xe9\xeb\xea\xec\xed\xef\xee\xf2\xf3\xf6\xf4\xf9\xfa\xfc\xfb\xf1\xe7\xb7/_,:;",n=0,r=a.length;n<r;n++)e=e.replace(new RegExp(a.charAt(n),"g"),"aaaaaaeeeeiiiioooouuuunc------".charAt(n));return e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+/,"").replace(/-+$/,"").replace(/-/g,t)}var G=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(c.a)(this,Object(o.a)(t).call(this))).handleSubmit=function(t){t.preventDefault(),q(e.state.file).then(function(t){var a={title:e.state.title,slug:X(e.state.title),description:e.state.description,image:{resource_type:t.resource_type,format:t.format,width:t.width,height:t.height,original_filename:t.original_filename,url:t.url,secure_url:t.secure_url},cost:Number(e.state.cost),difficulty:Number(e.state.difficulty),country:{cca3:e.state.country}};j.postRecipeInCategory(e.state.category,a).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})},e.handleFile=function(t){e.setState({file:t.target.files[0]});var a=t.target.files[0];e.setState({preview_img:URL.createObjectURL(a)})},e.state={countries:[],country:"",getImage:"",preview_img:"",title:"",description:"",category:"",cost:0,difficulty:0,fileUrl:"",file:"",filename:""},e}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://restcountries.eu/rest/v2/regionalbloc/au").then(function(e){return e.json()}).then(function(t){return e.setState({countries:t})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this;return s.a.createElement(i.Fragment,null,s.a.createElement("div",null,s.a.createElement("h1",null,"Add your recipe"),s.a.createElement("form",{style:{marginBottom:"65px"},onSubmit:this.handleSubmit,className:"add-recipe"},s.a.createElement("div",{className:"add-recipe__image"},s.a.createElement("label",null,s.a.createElement("img",{width:"100%",src:this.state.preview_img,alt:""}),s.a.createElement("input",{type:"file",onChange:this.handleFile,accept:"image/*"}))),s.a.createElement("div",{className:"add-recipe__title"},s.a.createElement("label",null,s.a.createElement("input",{type:"text",name:"title",placeholder:"Write the name of the dish here*",value:this.state.title,onChange:function(t){return e.setState(Object(R.a)({},t.target.name,t.target.value))}}))),s.a.createElement("div",{className:"add_recipe__description"},s.a.createElement("label",null,s.a.createElement("textarea",{name:"description",placeholder:"Write your subtitle or a shortdescription of the dish here.",value:this.state.description,onChange:function(t){return e.setState(Object(R.a)({},t.target.name,t.target.value))}}))),s.a.createElement("div",{className:"add-recipe__category"},s.a.createElement("select",{value:this.state.category,onChange:function(t){return e.setState({category:t.target.value})}},s.a.createElement("option",{value:""},"-- Please choose a category --"),s.a.createElement(S.Consumer,null,function(e){return e.state.categories.map(function(e,t){return s.a.createElement("option",{key:t,value:e._id},e.title)})}))),s.a.createElement("div",{className:"add-recipe__difficulty"},s.a.createElement("label",null,"Difficulte"),s.a.createElement("input",{type:"number",name:"difficulty",onChange:function(t){return e.setState({difficulty:t.target.value})},value:this.state.difficulty})),s.a.createElement("div",{className:"add-recipe__cost"},s.a.createElement("label",null,"cout"),s.a.createElement("input",{type:"number",name:"cost",onChange:function(t){return e.setState({cost:t.target.value})},value:this.state.cost})),s.a.createElement("div",{className:"add-recipe__prep-time"}),s.a.createElement("div",{className:"add-recipe__cook-time"}),s.a.createElement("div",{className:"add-recipe__wait-time"}),s.a.createElement("div",{className:"add-recipe__yield"}),s.a.createElement("div",{className:"add-recipe__country"},s.a.createElement("select",{value:this.state.country,onChange:function(t){return e.setState({country:t.target.value})}},s.a.createElement("option",{value:""},"-- Please select a country --"),this.state.countries.map(function(e,t){return s.a.createElement("option",{key:t,value:e.alpha3Code},e.translations.fr)}))),s.a.createElement("button",{type:"submit"},"Save recipe"))),s.a.createElement(C,null))}}]),t}(i.Component),$=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).handleFiles=function(){},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"dropbox"},s.a.createElement("h1",null,"Upload files with to Cloudinary with HTML5 file upload")," Learn more in this blog post - ",s.a.createElement("a",{href:"https://cloudinary.com/blog/direct_upload_made_easy_from_browser_or_mobile_app_to_the_cloud"},"Direct upload made easy, from browser or mobile app to the cloud"),s.a.createElement("form",{className:"my-form"},s.a.createElement("div",{className:"form_line"},s.a.createElement("h4",null,"Upload multiple files with the file dialog or by dragging and dropping images onto the dashed region"),s.a.createElement("div",{className:"form_controls"},s.a.createElement("div",{className:"upload_button_holder"},s.a.createElement("input",{type:"file",id:"fileElem",multiple:!0,accept:"image/*",onChange:this.uploadFile}),s.a.createElement("a",{href:"#",id:"fileSelect"},"Select some files"))))),s.a.createElement("div",{className:"progress-bar",id:"progress-bar"},s.a.createElement("div",{className:"progress",id:"progress"})),s.a.createElement("div",{id:"gallery"}))}}]),t}(i.Component);a(35),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=function(e){function t(){return Object(n.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return s.a.createElement(i.Fragment,null,s.a.createElement(k,null,s.a.createElement(p.a,null,s.a.createElement(h.a,{exact:!0,path:"/",component:I}),s.a.createElement(z,{exact:!0,path:"/cookbook",component:G}),s.a.createElement(z,{exact:!0,path:"/cookbook/:slug",component:$}),s.a.createElement(h.a,{exact:!0,path:"/recettes/:slug",component:B}),s.a.createElement(h.a,{exact:!0,path:"/category/:slug",component:W}),s.a.createElement(z,{exact:!0,path:"/profile",component:D}),s.a.createElement(h.a,{exact:!0,path:"/login",component:P}),s.a.createElement(h.a,{exact:!0,path:"/register",component:A}))))}}]),t}(i.Component);m.a.render(s.a.createElement(f.a,null,s.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.473a3bdf.chunk.js.map